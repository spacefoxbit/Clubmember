# AI Insights Setup Guide

## What You'll Get
The AI Insights feature will automatically analyze your member data and display:
- **New members** joined in the last 3 months
- **Most popular state** among all members
- **Favorite car color** from recent members
- **Total edits** (members who added modifications)
- **AI-generated summary** (50 words) highlighting trends

## Local Testing (Right Now)

Your website is already configured with **mock AI insights** for testing. The insights section will:
1. Calculate real metrics from your Google Sheets data
2. Display a smart summary without calling Gemini API
3. Show 4 metric cards with the calculated values

**To test locally:**
```powershell
# Start your local server
python -m http.server 8000
```

Then visit `http://localhost:8000` - you'll see the "ü§ñ AI Club Insights" section with real data!

---

## Full AI Setup (When Ready to Deploy)

### Step 1: Get Your Gemini API Key

1. Go to **https://aistudio.google.com/**
2. Sign in with your Google account
3. Click **"Get API key"** in the left sidebar
4. Your API key should already be there (starts with `AIza...`)
5. Copy the key

### Step 2: Deploy the Apps Script

1. Open **https://script.google.com/**
2. Click **"New Project"**
3. Copy all the code from `AppsScript_AIInsights.gs` in this folder
4. Paste it into the script editor
5. **IMPORTANT:** Replace `YOUR_GEMINI_API_KEY_HERE` with your actual Gemini API key
6. Save the project (name it "Club Insights AI")

### Step 3: Deploy as Web App

1. In Apps Script, click **Deploy** ‚Üí **New deployment**
2. Click the gear icon ‚öôÔ∏è next to "Select type"
3. Choose **"Web app"**
4. Set:
   - **Description:** "Club Insights API"
   - **Execute as:** Me (your email)
   - **Who has access:** Anyone
5. Click **Deploy**
6. Copy the **Web app URL** (it will look like `https://script.google.com/macros/s/...../exec`)

### Step 4: Update Your Website

1. Open `script.js`
2. Find this line:
   ```javascript
   const APPS_SCRIPT_INSIGHTS_URL = 'YOUR_APPS_SCRIPT_INSIGHTS_URL_HERE';
   ```
3. Replace it with your actual Web app URL:
   ```javascript
   const APPS_SCRIPT_INSIGHTS_URL = 'https://script.google.com/macros/s/YOUR_URL_HERE/exec';
   ```
4. Save the file

### Step 5: Test and Deploy

**Test locally:**
```powershell
python -m http.server 8000
```

Visit `http://localhost:8000` - the AI insights should now be generated by Gemini!

**Deploy to GitHub Pages:**
```powershell
git add .
git commit -m "Add AI Insights feature"
git push
```

---

## How It Works

### Frontend (script.js)
- Calls the Apps Script when page loads
- Displays AI-generated summary and metrics
- Refresh button (üîÑ) to get updated insights

### Backend (Apps Script)
- Fetches data from your Google Sheet
- Calculates 4 key metrics
- Sends metrics to Gemini API with a prompt
- Returns AI-generated summary + metrics

### Security
‚úÖ **API key stays server-side** in Apps Script (not exposed in your website code)  
‚úÖ **Anyone can view insights** but can't access your API key  
‚úÖ **Gemini free tier** includes 60 requests/minute (plenty for your needs)

---

## Cost & Limits

**Gemini API Free Tier:**
- ‚úÖ 60 requests per minute
- ‚úÖ 1,500 requests per day
- ‚úÖ Completely free

Your website will make ~1 request per user visit, so you can handle **thousands of visitors per day** for free.

---

## Troubleshooting

### "Unable to load AI insights"
- Check that Apps Script URL is correct in `script.js`
- Make sure Apps Script is deployed with "Anyone" access
- Check Apps Script logs: View ‚Üí Execution log

### Mock data showing instead of AI
- Verify `GEMINI_API_KEY` is set in Apps Script
- Make sure it starts with `AIza...`
- Check Apps Script logs for API errors

### Insights not updating
- Click the refresh button (üîÑ)
- Check your Google Sheet has recent data
- Apps Script caches for ~5 minutes

---

## Customization

### Change the AI prompt
Edit the `prompt` variable in `callGeminiAPI()` function in Apps Script:
```javascript
const prompt = `Your custom prompt here...`;
```

### Add more metrics
1. Calculate in `calculateMetrics()` function
2. Add to `displayInsights()` function in script.js
3. Update CSS for additional metric cards

### Change update frequency
Add a cache mechanism in Apps Script to limit API calls:
```javascript
const cache = CacheService.getScriptCache();
const cached = cache.get('insights');
if (cached) return cached;
// ... generate insights ...
cache.put('insights', result, 300); // Cache for 5 minutes
```

---

## Questions?

The AI feature is **optional** - your website works perfectly with mock insights for local testing. You can deploy the full AI version whenever you're ready!
